Step 1:Clone the dependency repositories
--------------------
***branch****
weston 2.0: rocko
weston 5.0:	thud
--------------------
$ cd ${WORK_DIR}
$ git clone -b {branch} git://git.yoctoproject.org/poky.git 
$ git clone -b {branch} git://git.openembedded.org/meta-openembedded
$ git clone -b {branch} https://github.com/meta-qt5/meta-qt5
$ git clone -b {branch} git://git.yoctoproject.org/meta-security
$ git clone -b {branch} git://git.yoctoproject.org/meta-raspberrypi

Step 2: Set up build environment

BUILD_DIR is you build folder

$ source poky/oe-init-build-env $BUILD_DIR
$ bitbake-layers add-layer ../meta-raspberrypi
$ bitbake-layers add-layer ../meta-openembedded/meta-oe

Step 3: Set up your local.conf and bblayer.conf

$ vi conf/local.conf

eidt local.conf with below infomation:

	- MACHINE ??= "qemux86" 
	+ MACHINE ?= "raspberrypi3" 
	+ DISTRO_FEATURES_append = " wayland opengl" 
	+ DISTRO_FEATURES_remove = " x11" 
	+ MACHINE_FEATURES += "vc4graphics"  
	+ CONNECTIVITY_CHECK_URIS = "" 
	+ ENABLE_UART="1"

$ vi conf/bblayer.conf
Add below infomation:

BBLAYERS ?= " \
	...
	...
	${TOPDIR}/../meta-openembedded/meta-oe \
	${TOPDIR}/../meta-openembedded/meta-multimedia \
	${TOPDIR}/../meta-openembedded/meta-networking \
	${TOPDIR}/../meta-openembedded/meta-perl \
	${TOPDIR}/../meta-openembedded/meta-python \
	${TOPDIR}/..poky/meta-qt5 \
	${TOPDIR}/..poky/meta-raspberrypi \
	${TOPDIR}/..poky/meta-security \  
	"

Step 4: To enable weston-simple-egl client

	vi ../poky/meta-raspberrypi/recipes-graphics/wayland/weston_%.bbappend
	
From:
	EXTRA_OECONF_append_rpi = " \
		--disable-xwayland-test \
		--disable-simple-egl-clients \
		${@bb.utils.contains('MACHINE_FEATURES', 'vc4graphics', '', ' \
			--disable-resize-optimization \
			--disable-setuid-install \
		', d)} \
	"
To
	EXTRA_OECONF_append_rpi = " \
		--disable-xwayland-test \
		${@bb.utils.contains('MACHINE_FEATURES', 'vc4graphics', '', ' \
			--disable-resize-optimization \
			--disable-setuid-install \
		', d)} \
	"

Step 5:
$	time bitbake core-image-weston 
	For checking time built
Step 6: copy image to SD card.
	sudo dd if=tmp/deploy/images/raspberrypi3/core-image-weston-raspberrypi3.rpi-sdimg of=/dev/sdi bs=100M
